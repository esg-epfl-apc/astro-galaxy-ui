var u=Object.defineProperty;var d=(l,o,s)=>o in l?u(l,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[o]=s;var h=(l,o,s)=>d(l,typeof o!="symbol"?o+"":o,s);import{F as g}from"./buffer-Duz0mlao.js";import{S as m}from"./single_line-BgXoYfyH.js";import{u as y,b}from"./index-DPsHDnTC.js";import"./base_line-BQHxxMx0.js";class w extends m{constructor(s,e){super(s,e);h(this,"glyph");this.glyph=e}draw(s,e,_){this._draw_impl(s,_,e.glglyph)}_get_show_buffer(s,e){return e._show}_get_visuals(){return this.glyph.visuals.line}_set_data_points(){const s=this.glyph.sx,e=this.glyph.sy,_=this.glyph.model.mode;let a=s.length;const N=a>2&&s[0]==s[a-1]&&e[0]==e[a-1]&&isFinite(s[0])&&isFinite(e[0]),c=_=="center"?2*a:2*a-1;this._points==null&&(this._points=new g(this.regl_wrapper));const t=this._points.get_sized_array((c+2)*2);let r=isFinite(s[0]+e[0]),n=2;_=="center"&&(t[n++]=r?s[0]:NaN,t[n++]=e[0]);for(let i=0;i<a-1;i++){const p=isFinite(s[i+1]+e[i+1]);switch(_){case"before":t[n++]=r?s[i]:NaN,t[n++]=e[i],i<a-1&&(t[n++]=r&&p?s[i]:NaN,t[n++]=e[i+1]);break;case"after":t[n++]=r?s[i]:NaN,t[n++]=e[i],i<a-1&&(t[n++]=r&&p?s[i+1]:NaN,t[n++]=e[i]);break;case"center":if(r&&p){const f=(s[i]+s[i+1])/2;t[n++]=f,t[n++]=e[i],t[n++]=f,t[n++]=e[i+1]}else t[n++]=r?s[i]:NaN,t[n++]=e[i],t[n++]=p?s[i+1]:NaN,t[n++]=e[i+1];break;default:y()}r=p}return t[n++]=r?s[a-1]:NaN,t[n++]=r?e[a-1]:NaN,b(n==c*2+2),a=c,N?(t[0]=t[2*a-2],t[1]=t[2*a-1],t[2*a+2]=t[4],t[2*a+3]=t[5]):(t[0]=0,t[1]=0,t[2*a+2]=0,t[2*a+3]=0),this._points.update(),t}}h(w,"__name__","StepGL");export{w as StepGL};
