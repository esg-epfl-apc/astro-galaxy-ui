var u=Object.defineProperty;var y=(_,t,s)=>t in _?u(_,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):_[t]=s;var r=(_,t,s)=>y(_,typeof t!="symbol"?t+"":t,s);import{B as m}from"./base_marker-AUrEhhO2.js";import{i as f}from"./buffer-Duz0mlao.js";import"./index-DPsHDnTC.js";class d extends m{constructor(s,a){super(s,a);r(this,"glyph");r(this,"_marker_types");r(this,"_unique_marker_types");this.glyph=a}draw(s,a,c){const e=a.glglyph;(e.data_changed||e.data_mapped)&&(e.set_data(),e.data_changed=!1,e.data_mapped=!1),this.visuals_changed&&(this._set_visuals(),this.visuals_changed=!1);const i=e.nvertices,o=e._unique_marker_types.length;for(const h of e._unique_marker_types){if(h==null)continue;let n=i;const g=this._show.length,l=this._show.get_sized_array(i);if(o>1||s.length<i){this._show_all=!1,l.fill(0),n=0;for(const p of s)(o==1||e._marker_types.get(p)==h)&&(l[p]=255,n++)}else(!this._show_all||g!=i)&&(this._show_all=!0,l.fill(255));this._show.update(),n!=0&&this._draw_one_marker_type(h,c,e)}}_get_visuals(){return this.glyph.visuals}_set_data(){const s=this.nvertices,a=this._centers.get_sized_array(2*s);f(this.glyph.sx,this.glyph.sy,s,m.missing_point,a),this._centers.update(),this._widths.set_from_prop(this.glyph.size),this._angles.set_from_prop(this.glyph.angle),this._marker_types=this.glyph.marker,this._unique_marker_types=[...new Set(this._marker_types)]}_set_once(){super._set_once(),this._heights.set_from_scalar(0),this._auxs.set_from_scalar(0)}}r(d,"__name__","MultiMarkerGL");export{d as MultiMarkerGL};
