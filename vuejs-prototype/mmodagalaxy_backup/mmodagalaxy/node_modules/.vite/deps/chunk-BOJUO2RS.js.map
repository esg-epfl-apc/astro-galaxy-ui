{
  "version": 3,
  "sources": ["../../@bokeh/bokehjs/build/js/lib/models/glyphs/webgl/single_line.js"],
  "sourcesContent": ["import { BaseLineGL } from \"./base_line\";\nimport { Float32Buffer, Uint8Buffer } from \"./buffer\";\nexport class SingleLineGL extends BaseLineGL {\n    glyph;\n    static __name__ = \"SingleLineGL\";\n    constructor(regl_wrapper, glyph) {\n        super(regl_wrapper, glyph);\n        this.glyph = glyph;\n    }\n    _draw_impl(indices, transform, main_gl_glyph) {\n        if (this.visuals_changed) {\n            this._set_visuals();\n            this.visuals_changed = false;\n        }\n        const data_changed_or_mapped = main_gl_glyph.data_changed || main_gl_glyph.data_mapped;\n        if (data_changed_or_mapped) {\n            main_gl_glyph._set_data(main_gl_glyph.data_changed);\n        }\n        if ((data_changed_or_mapped && main_gl_glyph._is_dashed) || this._is_dashed) {\n            // length_so_far is a data property as it depends on point positions in canvas coordinates\n            // but is only needed for dashed lines so it also depends on visual properties.\n            // Care needed if base glyph is solid but e.g. nonselection glyph is dashed.\n            main_gl_glyph._set_length();\n        }\n        if (data_changed_or_mapped) {\n            main_gl_glyph.data_changed = false;\n            main_gl_glyph.data_mapped = false;\n        }\n        // Get show buffer to account for selected indices.\n        const show = this._get_show_buffer(indices, main_gl_glyph);\n        const npoints = main_gl_glyph._points.length / 2 - 2;\n        const nsegments = npoints - 1;\n        this._draw_single(main_gl_glyph, transform, 0, 0, nsegments, null, show);\n    }\n    _set_data(data_changed) {\n        // If data_changed is false the underlying glyph data has not changed but has been mapped to\n        // different canvas coordinates e.g. via pan or zoom. If data_changed is true the data itself\n        // has changed, which also implies it has been mapped.\n        const points_array = this._set_data_points();\n        if (data_changed) {\n            // show flags for data, taking into account NaNs but not selected indices\n            // Points array includes extra points at each end\n            const npoints = points_array.length / 2 - 2;\n            if (this._show == null) {\n                this._show = new Uint8Buffer(this.regl_wrapper);\n            }\n            const show_array = this._show.get_sized_array(npoints + 1);\n            this._set_show_single(show_array, points_array);\n            this._show.update();\n        }\n    }\n    _set_length() {\n        const points_array = this._points.get_array();\n        const show_array = this._show.get_array();\n        // Points array includes extra points at each end\n        const npoints = points_array.length / 2 - 2;\n        if (this._length_so_far == null) {\n            this._length_so_far = new Float32Buffer(this.regl_wrapper);\n        }\n        const length_so_far = this._length_so_far.get_sized_array(npoints - 1);\n        this._set_length_single(length_so_far, points_array, show_array);\n        this._length_so_far.update();\n    }\n}\n//# sourceMappingURL=single_line.js.map"],
  "mappings": ";;;;;;;;;;;;AAEO,IAAM,eAAN,cAA2B,WAAW;AAAA,EAGzC,YAAY,cAAc,OAAO;AAC7B,UAAM,cAAc,KAAK;AAH7B;AAII,SAAK,QAAQ;AAAA,EACjB;AAAA,EACA,WAAW,SAAS,WAAW,eAAe;AAC1C,QAAI,KAAK,iBAAiB;AACtB,WAAK,aAAa;AAClB,WAAK,kBAAkB;AAAA,IAC3B;AACA,UAAM,yBAAyB,cAAc,gBAAgB,cAAc;AAC3E,QAAI,wBAAwB;AACxB,oBAAc,UAAU,cAAc,YAAY;AAAA,IACtD;AACA,QAAK,0BAA0B,cAAc,cAAe,KAAK,YAAY;AAIzE,oBAAc,YAAY;AAAA,IAC9B;AACA,QAAI,wBAAwB;AACxB,oBAAc,eAAe;AAC7B,oBAAc,cAAc;AAAA,IAChC;AAEA,UAAM,OAAO,KAAK,iBAAiB,SAAS,aAAa;AACzD,UAAM,UAAU,cAAc,QAAQ,SAAS,IAAI;AACnD,UAAM,YAAY,UAAU;AAC5B,SAAK,aAAa,eAAe,WAAW,GAAG,GAAG,WAAW,MAAM,IAAI;AAAA,EAC3E;AAAA,EACA,UAAU,cAAc;AAIpB,UAAM,eAAe,KAAK,iBAAiB;AAC3C,QAAI,cAAc;AAGd,YAAM,UAAU,aAAa,SAAS,IAAI;AAC1C,UAAI,KAAK,SAAS,MAAM;AACpB,aAAK,QAAQ,IAAI,YAAY,KAAK,YAAY;AAAA,MAClD;AACA,YAAM,aAAa,KAAK,MAAM,gBAAgB,UAAU,CAAC;AACzD,WAAK,iBAAiB,YAAY,YAAY;AAC9C,WAAK,MAAM,OAAO;AAAA,IACtB;AAAA,EACJ;AAAA,EACA,cAAc;AACV,UAAM,eAAe,KAAK,QAAQ,UAAU;AAC5C,UAAM,aAAa,KAAK,MAAM,UAAU;AAExC,UAAM,UAAU,aAAa,SAAS,IAAI;AAC1C,QAAI,KAAK,kBAAkB,MAAM;AAC7B,WAAK,iBAAiB,IAAI,cAAc,KAAK,YAAY;AAAA,IAC7D;AACA,UAAM,gBAAgB,KAAK,eAAe,gBAAgB,UAAU,CAAC;AACrE,SAAK,mBAAmB,eAAe,cAAc,UAAU;AAC/D,SAAK,eAAe,OAAO;AAAA,EAC/B;AACJ;AA3DI,cAFS,cAEF,YAAW;",
  "names": []
}
